flowchart TD
    Start([ğŸš€ Start]) --> CheckAuth{ğŸ” User Authenticated?}
    
    CheckAuth -->|No| LoginPage[ğŸ“ Show Login Page]
    LoginPage --> EnterCreds[Enter Credentials]
    EnterCreds --> Authenticate[ğŸ”„ Authenticate with Stack]
    Authenticate --> AuthSuccess{âœ… Success?}
    AuthSuccess -->|No| LoginError[âŒ Show Error]
    LoginError --> LoginPage
    AuthSuccess -->|Yes| CheckAuth
    
    CheckAuth -->|Yes| Dashboard[ğŸ“Š Load Dashboard]
    Dashboard --> CheckUser{ğŸ‘¤ User Exists in DB?}
    CheckUser -->|No| CreateUser[â• Create User Record]
    CreateUser --> LoadData
    CheckUser -->|Yes| LoadData[ğŸ“¥ Load User Data & History]
    
    LoadData --> DisplayDashboard[ğŸ–¥ï¸ Display Dashboard]
    DisplayDashboard --> UserChoice{ğŸ¯ User Action?}
    
    UserChoice -->|Select Coaching| SelectOption[ğŸ“ Choose Coaching Option]
    SelectOption --> OpenDialog[ğŸ“‹ Open Input Dialog]
    OpenDialog --> EnterTopic[âœï¸ Enter Topic]
    EnterTopic --> SelectExpert[ğŸ‘¨â€ğŸ« Select Expert]
    SelectExpert --> ValidInput{âœ… Valid Input?}
    ValidInput -->|No| EnterTopic
    ValidInput -->|Yes| CreateRoom[ğŸ  Create Discussion Room]
    CreateRoom --> NavigateRoom[ğŸšª Navigate to Room]
    NavigateRoom --> StartSession[ğŸ™ï¸ Start Voice Session]
    
    StartSession --> SessionLoop{ğŸ”„ Session Active?}
    SessionLoop -->|Yes| VoiceInput[ğŸ¤ Capture Voice]
    VoiceInput --> Transcribe[ğŸ“ Transcribe Speech]
    Transcribe --> SendToAI[ğŸ¤– Send to OpenAI]
    SendToAI --> GetResponse[ğŸ’¬ Get AI Response]
    GetResponse --> TextToSpeech[ğŸ”Š Convert to Speech]
    TextToSpeech --> PlayAudio[ğŸ”ˆ Play Audio]
    PlayAudio --> SaveConvo[ğŸ’¾ Save Conversation]
    SaveConvo --> SessionLoop
    
    SessionLoop -->|No| EndSession[ğŸ End Session]
    EndSession --> ShowFeedback[ğŸ“Š Show Feedback]
    ShowFeedback --> UserChoice
    
    UserChoice -->|View History| ShowHistory[ğŸ“œ Display History]
    ShowHistory --> UserChoice
    
    UserChoice -->|Logout| Logout[ğŸšª Logout]
    Logout --> End([ğŸ”š End])
